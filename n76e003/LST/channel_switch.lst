C51 COMPILER V9.56.0.0   CHANNEL_SWITCH                                                    12/28/2017 16:46:12 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE CHANNEL_SWITCH
OBJECT MODULE PLACED IN .\Output\channel_switch.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE N76E003\Code\channel_switch.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Include
                    -;.\Include) DEFINE(FOSC_160000) DEBUG OBJECTEXTEND PRINT(.\LST\channel_switch.lst) TABS(2) OBJECT(.\Output\channel_switc
                    -h.obj)

line level    source

   1          #include "Common.h"
   2          #include "config.h"
   3          
   4          extern  UINT8 VOL_LED;
   5          extern  void Timer0_Delay1ms(UINT32 u32CNT);
   6          extern  void  GPIO_MUTE(void);
   7          extern const unsigned char code g_abMax1xDSPCommands[];
   8          extern const unsigned char code g_abMax2xDSPCommands[];
   9          extern const unsigned char code g_abMax3xDSPCommands[];
  10          extern  void I2C_Write_Command(UINT8 u8Address, UINT8* p8Data, UINT32 u32ByteSize);
  11          void  NPCA110P_SOURCE(void);
  12          #define   NPCA110P_EEPROM_SLA     0xe6
  13          
  14          UINT8 source_in = 1,mode_in = 1;
  15          
  16          //模拟输入通道切换命令：
  17          const unsigned char code channel_Commands[] = 
  18          {
  19          0xFF,0xAD,0x83,   0x00,0x00,0x88,      //通道1  
  20          0xFF,0xAD,0x86,   0x00,0x00,0x00, 
  21          0xFF,0xAD,0x86,   0x00,0x00,0x01, 
  22          0xFF,0xAD,0x86,   0x00,0x00,0x00,
  23                                          
  24          0xFF,0xAD,0x83,   0x00,0x00,0x99,      //通道2  
  25          0xFF,0xAD,0x86,   0x00,0x00,0x00, 
  26          0xFF,0xAD,0x86,   0x00,0x00,0x01, 
  27          0xFF,0xAD,0x86,   0x00,0x00,0x00,
  28                                          
  29          0xFF,0xAD,0x83,   0x00,0x00,0xAA,      //通道3  
  30          0xFF,0xAD,0x86,   0x00,0x00,0x00, 
  31          0xFF,0xAD,0x86,   0x00,0x00,0x01, 
  32          0xFF,0xAD,0x86,   0x00,0x00,0x00
  33          };     
  34          unsigned char volume_Control[] = 
  35          {
  36            0x01, 0xd0, 0x9a
  37          }; 
  38             
  39          void  NPCA110P_init(void)
  40          {
  41   1        int i;
  42   1      //  source_in = 1,mode_in = 1;
  43   1        GPIO_MUTE();
  44   1        switch(mode_in)
  45   1        {
  46   2          case  1:
  47   2              for(i=0;i<308;i++)
  48   2              {
  49   3                I2C_Write_Command(NPCA110P_EEPROM_SLA,(g_abMax1xDSPCommands+i*3),3);//924);
  50   3                Timer0_Delay1ms(1);
  51   3              }
  52   2              break;
  53   2          case  2:
C51 COMPILER V9.56.0.0   CHANNEL_SWITCH                                                    12/28/2017 16:46:12 PAGE 2   

  54   2              for(i=0;i<308;i++)
  55   2              {
  56   3                I2C_Write_Command(NPCA110P_EEPROM_SLA,(g_abMax2xDSPCommands+i*3),3);//924);
  57   3                Timer0_Delay1ms(1);
  58   3              }
  59   2              break;    
  60   2          case  3:
  61   2              for(i=0;i<308;i++)
  62   2              {
  63   3                I2C_Write_Command(NPCA110P_EEPROM_SLA,(g_abMax3xDSPCommands+i*3),3);//924);
  64   3                Timer0_Delay1ms(1);
  65   3              }
  66   2              break;    
  67   2          default:
  68   2            break;
  69   2        }
  70   1        source_in--;
  71   1        NPCA110P_SOURCE();
  72   1        GPIO_MUTE();
  73   1      }
  74          void  NPCA110P_VOL_A(void)
  75          {
  76   1        VOL_LED = 1;
  77   1        if(volume_Control[2]>=0xf3)
  78   1        {
  79   2          VOL_LED = 0;
  80   2          return;
  81   2        }
  82   1        volume_Control[2]=volume_Control[2]+6;
  83   1      //  volume_Control[5]++;
  84   1        I2C_Write_Command(NPCA110P_EEPROM_SLA,volume_Control,3);
  85   1      }
  86          void  NPCA110P_VOL_B(void)
  87          {
  88   1        VOL_LED = 1;
  89   1        if(volume_Control[2]<=0x00)
  90   1        {
  91   2          VOL_LED = 0;
  92   2          return;
  93   2        }
  94   1        if(volume_Control[2]<6)volume_Control[2]=6;
  95   1        volume_Control[2]=volume_Control[2]-6;
  96   1      //  volume_Control[5]--;
  97   1        I2C_Write_Command(NPCA110P_EEPROM_SLA,volume_Control,3);
  98   1      }
  99          void  NPCA110P_MUTE(void)
 100          {
 101   1      //  I2C_Write_Command(NPCA110P_EEPROM_SLA,g_abMax1xDSPCommands,10);
 102   1      }
 103          void  NPCA110P_MODE(void)
 104          {
 105   1        mode_in++;
 106   1        if(mode_in>3)mode_in = 1;
 107   1        NPCA110P_init();
 108   1      }
 109          void  NPCA110P_SOURCE(void)
 110          {
 111   1        UINT8 i;
 112   1        BT_POWER = 0;
 113   1        source_in++;
 114   1        if(source_in>3)source_in = 1;
 115   1        if(source_in==1)  
C51 COMPILER V9.56.0.0   CHANNEL_SWITCH                                                    12/28/2017 16:46:12 PAGE 3   

 116   1          for(i=0;i<8;i++)
 117   1          {
 118   2            I2C_Write_Command(NPCA110P_EEPROM_SLA,channel_Commands+i*3,3);
 119   2            Timer0_Delay1ms(1);
 120   2          }
 121   1        else  if(source_in==2)  
 122   1          for(i=0;i<8;i++)
 123   1          {
 124   2            I2C_Write_Command(NPCA110P_EEPROM_SLA,channel_Commands+24+i*3,3);
 125   2            Timer0_Delay1ms(1);
 126   2          }
 127   1        else  if(source_in==3)  
 128   1        {
 129   2          BT_POWER = 1;
 130   2          for(i=0;i<8;i++)
 131   2          {
 132   3            I2C_Write_Command(NPCA110P_EEPROM_SLA,channel_Commands+48+i*3,3);
 133   3            Timer0_Delay1ms(1);
 134   3          }   
 135   2        }
 136   1      
 137   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    554    ----
   CONSTANT SIZE    =     72    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
